openapi: 3.0.3
info:
  title: Coin Collector API
  description: |
    # API –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã "–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä –º–æ–Ω–µ—Ç"
    
    –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω—É–º–∏–∑–º–∞—Ç–∞–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏, –¥–æ–±–∞–≤–ª—è—Ç—å –º–æ–Ω–µ—Ç—ã –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é,
    –æ–ø–∏—Å—ã–≤–∞—Ç—å –∏—Ö –∏ –æ—Ü–µ–Ω–∏–≤–∞—Ç—å, –∞ —Ç–∞–∫–∂–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
    
    ## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
    
    - ü™ô **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–Ω–µ—Ç–∞–º–∏**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –º–æ–Ω–µ—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
    - üè∑Ô∏è **–¢–µ–≥–∏**: –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –º–æ–Ω–µ—Ç —Å –ø–æ–º–æ—â—å—é —Ç–µ–≥–æ–≤
    - ‚≠ê **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ**: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –º–æ–Ω–µ—Ç—ã –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
    - üë• **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
    - üîç **–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏, —Ç–µ–≥–∞–º
    - üìã **–≠–∫—Å–ø–æ—Ä—Ç**: –≤—ã–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –º–æ–Ω–µ—Ç –≤ Word-–¥–æ–∫—É–º–µ–Ω—Ç
    
    ## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
    
    API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JWT-—Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
    1. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ /api/auth/jwt/create/
    2. –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ–≥–æ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization: Bearer <token>
    
  version: 1.0.0
  contact:
    name: –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ API
    email: developer@coinapi.ru
    url: https://github.com/yourusername/coin-collector
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:8000
    description: –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
  - url: https://coin-collector-api.example.com
    description: –¢–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä

tags:
  - name: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
    description: –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–∫–µ–Ω–∞–º–∏
  - name: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
    description: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø—Ä–æ—Ñ–∏–ª—è–º–∏
  - name: –ü–æ–¥–ø–∏—Å–∫–∏
    description: –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - name: –ú–æ–Ω–µ—Ç—ã
    description: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π –º–æ–Ω–µ—Ç
  - name: –¢–µ–≥–∏
    description: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞–º–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ –º–æ–Ω–µ—Ç
  - name: –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
    description: –†–∞–±–æ—Ç–∞ —Å –∏–∑–±—Ä–∞–Ω–Ω—ã–º–∏ –º–æ–Ω–µ—Ç–∞–º–∏

paths:
  ‚Ä¶  # (–≤—Å–µ –≤–∞—à–∏ paths, –ø—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ)

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  parameters:
    PageParam:
      name: page
      in: query
      description: –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
      schema:
        type: integer
        default: 1
        minimum: 1
    PageSizeParam:
      name: page_size
      in: query
      description: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
      schema:
        type: integer
        default: 10
        minimum: 1
        maximum: 100

  responses:
    NotFound:
      description: –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    ValidationError:
      description: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ValidationError'
    Unauthorized:
      description: –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    Forbidden:
      description: –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'

  schemas:
    Error:
      type: object
      properties:
        detail:
          type: string
          example: "–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É —Ä–µ—Å—É—Ä—Å—É."

    ValidationError:
      type: object
      additionalProperties:
        type: array
        items:
          type: string
      example:
        name:
          - "–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ."
        email:
          - "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email."

    User:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        email:
          type: string
          format: email
        username:
          type: string
          minLength: 3
        first_name:
          type: string
        last_name:
          type: string
        avatar:
          type: string
          format: uri
          nullable: true
          description: URL –∞–≤–∞—Ç–∞—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      required:
        - id
        - email
        - username
        - first_name
        - last_name

    UserCreate:
      type: object
      properties:
        email:
          type: string
          format: email
        username:
          type: string
          minLength: 3
        first_name:
          type: string
        last_name:
          type: string
        password:
          type: string
          format: password
          minLength: 8
        avatar:
          type: string
          format: binary
          description: –§–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–∞
      required:
        - email
        - username
        - first_name
        - last_name
        - password

    UserUpdate:
      type: object
      properties:
        email:
          type: string
          format: email
        username:
          type: string
          minLength: 3
        first_name:
          type: string
        last_name:
          type: string
        password:
          type: string
          format: password
          minLength: 8
        avatar:
          type: string
          format: binary
          description: –§–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–∞

    Subscription:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        subscribed_to:
          type: integer
          description: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞
        created_at:
          type: string
          format: date-time
      required:
        - id
        - subscribed_to

    Coin:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        author:
          $ref: '#/components/schemas/User'
        name:
          type: string
          maxLength: 256
        description:
          type: string
        estimated_value:
          type: integer
          minimum: 1
        tags:
          type: array
          items:
            $ref: '#/components/schemas/Tag'
        image:
          type: string
          format: uri
          description: URL –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        pub_date:
          type: string
          format: date-time
      required:
        - id
        - author
        - name
        - description
        - estimated_value
        - tags
        - image
        - pub_date

    CoinCreate:
      type: object
      properties:
        name:
          type: string
          maxLength: 256
        description:
          type: string
        estimated_value:
          type: integer
          minimum: 1
        tags:
          type: array
          items:
            type: integer
          description: –°–ø–∏—Å–æ–∫ ID —Ç–µ–≥–æ–≤
        image:
          type: string
          format: binary
          description: –§–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–Ω–µ—Ç—ã
      required:
        - name
        - description
        - estimated_value
        - tags
        - image

    Tag:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 32
        slug:
          type: string
          maxLength: 32
        color:
          type: string
          description: HEX-–∫–æ–¥ —Ü–≤–µ—Ç–∞ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è
      required:
        - id
        - name
        - slug
        - color

    TagCreate:
      type: object
      properties:
        name:
          type: string
          maxLength: 32
        slug:
          type: string
          maxLength: 32
        color:
          type: string
          pattern: '^#([A-Fa-f0-9]{6})$'
      required:
        - name
        - slug
        - color

    Favorite:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        coin:
          $ref: '#/components/schemas/Coin'
        added_at:
          type: string
          format: date-time
      required:
        - id
        - coin

